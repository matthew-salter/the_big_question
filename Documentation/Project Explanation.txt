ğŸ”§ PROJECT EXPLANATION

# THREAD CONTEXT: Big Picture Project â€” Structured Predictive Report System

## ğŸ¯ Project Purpose

We are building a modular, AI-powered reporting system that takes a **natural language question**, classifies its **topic**, **intent**, and **structure**, and produces a publishable, structured report through a sequence of AI prompts and automation.

This system is fully extensible to any question type and domain, but we are currently focused on one specific, high-value pathway:

> **Predictive Report**  
> For **Commodity-topic questions**  
> Using a **weighted-factor forecasting model**

This architecture enables:
- Fully automated, token-aware report generation
- Modular design with reusable prompt components
- Structured JSON outputs for formatting, analytics, or design templating
- Section-by-section regeneration and feedback integration

---

## âš™ï¸ Current Focus: â€œCommodity-Predictive Pathâ€

Although the system can serve any combination of Question Type and Topic, we are currently building and testing the flow for:

> **Question Topic:** Commodity  
> **Question Type:** Predictive  
> **Report Type:** Predictive Report  

In other words, we are building a **Predictive Report engine**, currently specialised for questions such as:

- â€œWhat will the price of lithium be in China next quarter?â€
- â€œHow will wheat exports from Brazil be impacted over the next 12 months?â€
- â€œWhatâ€™s the forecast for freight cost volatility in the next fiscal year?â€

The Predictive Report template includes:
- Percentage makeup for each influencing factor
- Predicted % change per factor
- Weighted impact calculations (makeup Ã— change = effect)
- Summed scenario outcomes and optional charts/tables

---

## ğŸ§  Why This Architecture?

Unlike traditional prompt workflows (like ChatGPT sessions), this system:

- Avoids token limits by **splitting prompts into discrete sections**
- Avoids AI memory errors by making every prompt **stateless and variable-driven**
- Allows partial regeneration (e.g. â€œrewrite section 3â€ without touching others)
- Prepares for future automation of document export, charting, and email delivery

---

## ğŸ› ï¸ Technical Stack

- **Trigger**: Zapier Webhook â†’ Python backend
- **AI**: OpenAI API (GPT-4 Turbo), called via `openai>=1.0.0`
- **Hosting**: Render.com (Flask server, auto-deployed from GitHub)
- **Output Format**: JSON per prompt â†’ CSV, GDoc, or design-ready output
- **Structure**: Fully modular (Prompts/, Scripts/, Documentation/)

---

## ğŸ“‚ File Structure (Simplified)

ğŸ“ Prompts/ â””â”€â”€ predictive_report/ â”œâ”€â”€ prompt_1_client_context.txt â”œâ”€â”€ prompt_2a_thinking.txt â”œâ”€â”€ prompt_2b_data_collection.txt â””â”€â”€ ...

ğŸ“ Scripts/ â””â”€â”€ predictive_report/ â”œâ”€â”€ client_context.py â”œâ”€â”€ prompt_2a.py â”œâ”€â”€ prompt_2b.py â””â”€â”€ ...

ğŸ“ Documentation/ â”œâ”€â”€ Master Architecture Document.txt â”œâ”€â”€ System Workflow Manual.txt â””â”€â”€ Project Explanation.txt

main.py render.yaml .env (OpenAI key)


---

## âœ… Current Status

- âœ… Prompt 1 fully working (Client Context â†’ structured JSON)
- âœ… Zapier to Python â†’ OpenAI round trip functioning
- âœ… Server runs cleanly via Gunicorn on Render
- âœ… Prompt version control and modularity stable

---

## ğŸ”œ Immediate Next Step

We're now working on **Prompt 2A** (â€œThinkingâ€ stage), which will generate:
- 10 key sections (e.g. â€œDriving Factorsâ€, â€œForecast Scenariosâ€)
- 3 sub-sections per section
- Initial `makeup_percent`, `change_low/high`, and `effect_calc` logic

This prompt will not yet include references or articles â€” just the structured logic for forecasting.

---

## âš ï¸ Critical System Rules

- Prompts must remain **stateless and deterministic**
- Do not inject memory or earlier model responses â€” everything must be passed explicitly
- Use `{{variables}}` consistently in all templates
- Wrap optional content blocks (like `{{supporting_documents}}`) in conditional logic
- When regenerating, inject the full context again â€” treat each block as atomic

---

## ğŸ“Œ Summary

We are building a **Predictive Report Engine**, not a â€œCommodity Reportâ€ system. Commodity-style questions are our *current test domain*, but the structure will expand to:

- Education, Healthcare, Finance, etc. (Question Topic)
- Comparative, Diagnostic, Evaluative questions (Question Type)
- New formatting logic (
